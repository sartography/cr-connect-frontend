<div class="container" fxLayout="column">
  <div *ngIf="!isCategorySelected" fxLayout="row" fxLayoutGap="20px">
    <mat-card
      *ngFor="let cat of categoryTabs; let i = index"
      fxFlex="calc({{100 / categoryTabs.length}}%-20px)"
      (click)="selectCategory($event, cat.id)"
      [ngClass]="'dashboard'"
    >
      <mat-card-title
        *ngIf="cat.workflows && cat.workflows.length > 0"
      >{{cat.display_name}}
        <span fxFlex></span>
        <span class="workflow-status">{{allComplete(cat) ? 'COMPLETE' : 'IN PROGRESS'}}</span>
      </mat-card-title>
      <mat-card-content>
        <mat-list>
          <mat-list-item
            *ngFor="let workflowListItem of workflowsToShow(cat.workflows)"
            [ngClass]="'workflow-list-item workflow_status--' + workflowListItem.status + ' workflow_state--' + workflowListItem.state"
            (click)="selectCategory($event, cat.id, workflowListItem.id)"
          >
            <div
              mat-line
              fxLayout="row"
              fxLayoutAlign="start center"
              [ngClass]="{'workflow-action': true}"
              [attr.data-study-id]="study.id"
              [attr.data-category-id]="cat.id"
              [attr.data-workflow-id]="workflowListItem.id"
            >
              <app-nav-item-icon [workflowStats]="workflowListItem"></app-nav-item-icon>
              <div>{{workflowListItem.display_name}}</div>
            </div>
          </mat-list-item>
        </mat-list>
      </mat-card-content>
    </mat-card>
  </div>
  <div *ngIf="isCategorySelected" fxLayout="column">
    <app-category
      [category]="selectedCategory"
      [study]="study"
      [workflowId]="selectedWorkflowId"
      (workflowUpdated)="selectWorkflow($event)"
    ></app-category>
  </div>
</div>

