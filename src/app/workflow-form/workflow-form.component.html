<div *ngIf="task && form; else loadingMessage" fxLayout="row">
  <div id="form-column">
    <div *ngIf="task.documentation" class="documentation">
      <markdown [data]="task.documentation"></markdown>
    </div>
    <formly-form
      (keyup)="handleKeyUp($event)"
      [fields]="fields"
      [form]="form"
      [model]="model"
    ></formly-form>

    <button (click)="saveTaskData(task)" [disabled]="form.invalid" color="primary" mat-flat-button>Save</button>
    <button (click)="goBack()" mat-flat-button>Cancel</button>
    <button
      title="This will apply the current settings to this task and all remaining tasks"
      *ngIf="getIncompleteMISiblings(task).length > 1"
      (click)="saveAllSiblingTaskData(task)"
      [disabled]="form.invalid"
      color="accent"
      mat-flat-button
    >Apply to all {{getIncompleteMISiblings(task).length}} {{workflow.title}}</button>

  </div>


</div>

<ng-template #loadingMessage>
  <app-loading></app-loading>
</ng-template>
