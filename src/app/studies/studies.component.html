<div class="studies-container" fxLayout="column">
  <nav fxFlex="100">
    <a mat-button (click)="view = 'dashboard'" [ngClass]="{'active': view === 'dashboard'}">Dashboard View</a>
    <span fxFlex></span>
    <a
      (click)="loading = true; loadStudies()"
      color="accent"
      id="cta_reload_studies"
      mat-button
      target="_blank"
    >
      <mat-icon>refresh</mat-icon>
      Check for new protocols
    </a>
  </nav>

  <div *ngIf="!loading; else loadingMessage">
    <app-studies-dashboard
      *ngIf="view === 'dashboard'"
      [studiesByStatus]="studiesByStatus"
      [beforeStudyIds]="beforeStudyIds"
      [afterStudyIds]="afterStudyIds"
      (studyUpdated)="updateStudies($event)"
    ></app-studies-dashboard>
  </div>
</div>

<ng-template #loadingMessage>
  <app-loading></app-loading>
</ng-template>
