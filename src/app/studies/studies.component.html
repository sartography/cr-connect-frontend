<div class="studies-container" fxLayout="column">
  <nav fxFlex="100">
    <a mat-button (click)="view = 'dashboard'" class="dashboard-text" [ngClass]="{'active': view === 'dashboard'}">Dashboard</a>
    <span fxFlex></span>
    <a
      (click)="loading = true; loadStudies()"
      class="contrast-button"
      color="accent"
      id="cta_reload_studies"
      mat-button
      target="_blank"
    >
      <mat-icon>refresh</mat-icon>
      Check for new protocols
    </a>
    <app-standalone></app-standalone>
  </nav>

  <div *ngIf="!loading; else loadingMessage" fxLayout="row" fxLayoutAlign="start center" style="margin-bottom: 4em;">
    <app-studies-dashboard
      fxFlex="100%"
      *ngIf="view === 'dashboard'"
      [studiesByStatus]="studiesByStatus"
      [beforeStudyIds]="beforeStudyIds"
      [afterStudyIds]="afterStudyIds"
      (studyUpdated)="updateStudies($event)"
    ></app-studies-dashboard>
  </div>
</div>

<ng-template #loadingMessage>
  <app-loading></app-loading>
</ng-template>
